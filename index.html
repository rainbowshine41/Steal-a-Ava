<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Steal-a-Ava — Roblox-style Prototype v2</title>
  <style>
    :root{
      --hot-pink:#ff2d8f; --bright-blue:#00b0ff; --bg-grad:linear-gradient(180deg,var(--hot-pink),#ff80bf);
      font-family:Inter,system-ui,-apple-system,'Segoe UI',Roboto,Arial;
    }
    *{box-sizing:border-box}
    body{margin:0;min-height:100vh;background:var(--bg-grad);color:#fff}
    .topbar{display:flex;align-items:center;justify-content:space-between;padding:12px 20px}
    .profile{display:flex;align-items:center;gap:10px}
    .avatar{width:56px;height:56px;border-radius:10px;background:linear-gradient(135deg,#ffe0b2,#ffd6f0);display:flex;align-items:center;justify-content:center;font-weight:900;color:#303}
    h1{margin:0;color:var(--bright-blue);font-size:20px}
    .search{flex:1;max-width:560px;margin:0 18px}
    .search input{width:100%;padding:10px;border-radius:12px;border:0;font-size:15px}
    .btn{background:var(--bright-blue);color:#002;padding:8px 12px;border-radius:10px;border:0;font-weight:800}
    .container{display:flex;gap:18px;padding:18px}
    .sidebar{width:320px}
    .card{background:rgba(255,255,255,0.06);padding:12px;border-radius:12px}
    .servers{display:flex;flex-direction:column;gap:8px;margin-top:8px}
    .server{display:flex;justify-content:space-between;align-items:center;padding:10px;border-radius:10px;background:rgba(255,255,255,0.02)}
    .main{flex:1}
    .arena{display:grid;grid-template-columns:1fr 360px 1fr;gap:12px}
    .base{background:rgba(0,0,0,0.18);padding:8px;border-radius:10px}
    .slots{display:grid;grid-template-columns:repeat(4,1fr);gap:6px}
    .slot{height:72px;background:rgba(255,255,255,0.04);display:flex;flex-direction:column;align-items:center;justify-content:center;border-radius:8px}
    .track{background:linear-gradient(180deg,rgba(0,0,0,0.08),transparent);border-radius:12px;height:420px;position:relative;display:flex;align-items:flex-start;justify-content:center}
    .lane{position:absolute;left:50%;transform:translateX(-50%);width:14px;height:100%;background:rgba(255,255,255,0.06);border-radius:8px}
    .ava-piece{position:absolute;width:86px;height:86px;border-radius:12px;background:#ffd7b3;display:flex;flex-direction:column;align-items:center;justify-content:center;font-weight:800;cursor:pointer}
    .controls{display:flex;gap:8px;margin-top:10px}
    .shop .item{display:flex;justify-content:space-between;align-items:center;padding:8px;border-radius:8px;background:rgba(255,255,255,0.03);margin-bottom:6px}
    .log{max-height:180px;overflow:auto;padding:8px;background:rgba(0,0,0,0.06);border-radius:8px;margin-top:10px}
    .bottom-left{position:fixed;left:20px;bottom:20px}
  </style>
</head>
<body>
  <div class="topbar">
    <div class="profile">
      <div class="avatar">A</div>
      <div>
        <h1>Steal-a-Ava</h1>
        <div style="font-size:12px;opacity:0.9">Roblox — Steal-A-Brainrot inspired</div>
      </div>
    </div>

    <div class="search">
      <input id="searchInput" placeholder="Search games / servers / Avas" />
    </div>

    <div style="display:flex;align-items:center;gap:10px">
      <button class="btn">Add Friends</button>
      <div style="text-align:right;font-size:13px">
        <div id="playerName">You</div>
        <div style="font-size:11px;opacity:0.85">Level 1</div>
      </div>
    </div>
  </div>

  <div class="container">
    <aside class="sidebar">
      <div class="card">
        <h3 style="margin:0">Games — Steal A Ava (servers)</h3>
        <div class="servers" id="serversList"></div>
      </div>

      <div style="height:12px"></div>

      <div class="card">
        <h4 style="margin:0">Profile</h4>
        <div style="display:flex;justify-content:space-between;align-items:center;margin-top:8px">
          <div>$<span id="money">0</span></div>
          <div><button id="createServer" class="btn">Create Server</button></div>
        </div>
        <div style="margin-top:12px">Shop</div>
        <div class="shop" id="shopArea"></div>
      </div>
    </aside>

    <main class="main">
      <div class="card">
        <h3 id="gameTitle">Select a server</h3>
        <div id="gameView" style="display:none">
          <div class="arena">
            <div>
              <div class="base card" id="leftBases"></div>
            </div>

            <div>
              <div class="track" id="trackArea">
                <div class="lane"></div>
              </div>

              <div class="controls">
                <button id="lockBase" class="btn">Lock My Base (60s)</button>
                <button id="buyBat" class="btn">Buy Baseball Bat ($5,000,000)</button>
                <div style="flex:1"></div>
                <div>Auto-spawn: every 3s • Despawn if not claimed at end</div>
              </div>
            </div>

            <div>
              <div class="base card" id="rightBases"></div>
            </div>
          </div>

          <div style="height:8px"></div>
          <div class="log" id="log"></div>
        </div>
      </div>
    </main>
  </div>

  <div class="bottom-left">
    <!-- placeholder for extra action buttons -->
  </div>

  <script>
    // --- Config ---
    const rarities = [
      {id:'common',label:'Common',valuePerSecRange:[1,1],buyRange:[50,50]},
      {id:'rare',label:'Rare',valuePerSecRange:[250,400],buyRange:[300,800]},
      {id:'epic',label:'Epic',valuePerSecRange:[500,1000],buyRange:[1000,10000]},
      {id:'legendary',label:'Legendary',valuePerSecRange:[1500,5500],buyRange:[30000,100000]},
      {id:'mythic',label:'Mythic',valuePerSecRange:[6000,20000],buyRange:[150000,200000]},
      {id:'avagod',label:'Ava God',valuePerSecRange:[25000,50000],buyRange:[300000,5000000]},
      {id:'secret',label:'Secret',valuePerSecRange:[550000,1500000],buyRange:[10000000,85000000]}
    ];

    function randInt(min,max){return Math.floor(Math.random()*(max-min+1))+min}
    function randFrom(arr){return arr[Math.floor(Math.random()*arr.length)]}

    // --- Data ---
    let servers = [];
    let serverIdCounter = 1;
    let currentServer = null;
    let player = {name:'You',money:0,baseIndex:0,hasBat:false};

    function createServer(name){
      const s={id:serverIdCounter++,name:name||`Steal-a-Ava #${serverIdCounter}`,bases:[],aInstances:[],log:[]};
      for(let i=0;i<4;i++) s.bases.push({id:i,owner:`Player${i+1}`,slots:Array(8).fill(null),locked:false,lockExpires:0});
      servers.push(s);return s;
    }

    // create initial servers
    for(let i=0;i<3;i++) createServer(`Steal-a-Ava Server ${i+1}`);

    // UI refs
    const serversList=document.getElementById('serversList');
    const gameTitle=document.getElementById('gameTitle');
    const gameView=document.getElementById('gameView');
    const leftBasesEl=document.getElementById('leftBases');
    const rightBasesEl=document.getElementById('rightBases');
    const trackArea=document.getElementById('trackArea');
    const logEl=document.getElementById('log');
    const moneyEl=document.getElementById('money');
    const shopArea=document.getElementById('shopArea');

    function renderServers(){
      serversList.innerHTML='';
      servers.forEach(s=>{
        const div=document.createElement('div');div.className='server';div.innerHTML=`<div><strong>${s.name}</strong><div style='font-size:12px;opacity:0.9'>${s.aInstances.length} Avas active</div></div><div><button class='btn'>Join</button></div>`;
        div.querySelector('button').addEventListener('click',()=>joinServer(s.id));serversList.appendChild(div);
      });
    }

    function log(s,text){
      const t=`[${new Date().toLocaleTimeString()}] ${text}`;s.log.unshift(t);if(s.log.length>200) s.log.pop();if(currentServer&&currentServer.id===s.id) renderLog();
    }

    function renderLog(){logEl.innerHTML=currentServer.log.map(l=>`<div>${l}</div>`).join('');}

    function joinServer(id){currentServer=servers.find(x=>x.id===id);gameTitle.textContent=`${currentServer.name} — Joined`;gameView.style.display='block';renderServerView();log(currentServer,`${player.name} joined.`);}

    function renderServerView(){
      leftBasesEl.innerHTML=''; rightBasesEl.innerHTML='';
      // left two bases
      for(let i=0;i<2;i++) leftBasesEl.appendChild(renderBase(currentServer.bases[i]));
      for(let i=2;i<4;i++) rightBasesEl.appendChild(renderBase(currentServer.bases[i]));
      // clear track pieces
      Array.from(trackArea.querySelectorAll('.ava-piece')).forEach(n=>n.remove());
      // render instances
      currentServer.aInstances.forEach(inst=>renderAvaPiece(inst));
      updateMoney();
    }

    function renderBase(base){
      const box=document.createElement('div');box.className='card';
      const title=document.createElement('div');title.style.fontWeight='800';title.textContent=`${base.owner} (Base ${base.id+1})`;
      const lockText=document.createElement('div');lockText.style.fontSize='12px';lockText.style.opacity='0.9';
      function updateLock(){ if(base.locked){ const s=Math.max(0,Math.ceil((base.lockExpires-Date.now())/1000)); lockText.textContent=`Locked — ${s}s`}else lockText.textContent='Unlocked' }
      updateLock();
      const slotsWrap=document.createElement('div');slotsWrap.className='slots';
      base.slots.forEach((s,i)=>{
        const slot=document.createElement('div');slot.className='slot';
        if(s){ slot.innerHTML=`<div style='font-weight:800'>${s.name}</div><div style='font-size:11px;opacity:0.9'>${s.rarity}</div><div style='margin-top:6px;font-size:12px'>$<span>${Math.floor(s.accrued||0)}</span></div>`;
          const claimBtn=document.createElement('button');claimBtn.textContent='Claim $';claimBtn.style.fontSize='12px';claimBtn.addEventListener('click',()=>{ const amt=Math.floor(s.accrued||0); player.money+=amt; s.accrued=0; updateMoney(); renderServerView(); log(currentServer,`${player.name} claimed $${amt} from ${s.name}`); }); slot.appendChild(claimBtn);
          const stealBtn=document.createElement('button');stealBtn.textContent='Steal';stealBtn.style.fontSize='12px';stealBtn.addEventListener('click',()=>stealFromSlot(base,i)); slot.appendChild(stealBtn);
        } else { slot.textContent='Empty' }
        slotsWrap.appendChild(slot);
      });
      const controls=document.createElement('div');controls.style.marginTop='8px';
      const claimAll=document.createElement('button');claimAll.className='btn';claimAll.textContent='Claim All';claimAll.addEventListener('click',()=>{ let total=0; base.slots.forEach(s=>{ if(s){ total+=Math.floor(s.accrued||0); s.accrued=0; }}); player.money+=total; updateMoney(); renderServerView(); log(currentServer,`${player.name} claimed $${total} from base ${base.id+1}`); });
      const lockBtn=document.createElement('button');lockBtn.className='btn';lockBtn.textContent='Lock (60s)';lockBtn.addEventListener('click',()=>{ if(base.owner!==player.name){ alert('You can only lock your own base in this prototype (your base is Base 1).'); return; } if(base.locked){ alert('Already locked'); return; } base.locked=true;base.lockExpires=Date.now()+60000; updateLock(); log(currentServer,`${player.name} locked base ${base.id+1} for 60s`); });
      controls.appendChild(claimAll); controls.appendChild(lockBtn);
      box.appendChild(title); box.appendChild(lockText); box.appendChild(slotsWrap); box.appendChild(controls);
      // countdown
      setInterval(()=>{ if(base.locked && Date.now()>base.lockExpires){ base.locked=false; renderServerView(); log(currentServer,`${base.owner}'s base unlocked`);} updateLock(); },1000);
      return box;
    }

    // spawn Avas automatically every 3s
    let avaCounter=0;
    function spawnAutoAva(){ if(!currentServer) return; const name=generateAvaName(avaCounter++); const rarityKey=weightedRarity(); const r=rarities.find(x=>x.id===rarityKey); const valuePerSec=randInt(r.valuePerSecRange[0],r.valuePerSecRange[1]); const inst={id:'ava-'+Date.now()+'-'+Math.random().toString(36).slice(2,6),name,rarity:r.label,rarityKey,valuePerSec,position:0,claimedBy:null,accrued:0,side:Math.random()>0.5?'left':'right'}; currentServer.aInstances.push(inst); renderAvaPiece(inst); log(currentServer,`Spawned ${inst.name} (${inst.rarity}) $${formatNum(inst.valuePerSec)}/s on ${inst.side}`); }

    function weightedRarity(){ const pool=[].concat(Array(45).fill('common'),Array(25).fill('rare'),Array(15).fill('epic'),Array(8).fill('legendary'),Array(5).fill('mythic'),Array(1).fill('avagod'),Array(1).fill('secret')); return randFrom(pool); }

    function generateAvaName(i){ const silly=['Bubucaca','Spronk','Gigglepuff','Zelava','Crunchy','Fizzle','TacoAva','Bubblegum','Sparkle','Noodle','Zebra','Flipflop','DingDong','Poptart','Muffin']; return `Ava ${silly[i% silly.length]}${i>0?i:''}` }

    function renderAvaPiece(inst){ let el=document.getElementById(inst.id); if(!el){ el=document.createElement('div'); el.className='ava-piece'; el.id=inst.id; el.innerHTML=`<div style='font-size:13px'>${inst.name}</div><div style='font-size:11px;opacity:0.9'>${inst.rarity}</div><div style='font-size:11px;margin-top:6px'>$${formatNum(inst.valuePerSec)}/s</div>`; trackArea.appendChild(el); el.addEventListener('click',()=>claimAva(inst)); }
      // compute position along track
      const trackRect=trackArea.getBoundingClientRect(); const totalH=trackRect.height-120; const y=20 + (inst.position/100)*totalH; const sideOffset=inst.side==='left' ? -140 : 140; const x=(trackRect.width/2 - 43) + sideOffset*Math.cos((inst.position/100)*Math.PI/2);
      el.style.transform=`translate(${x}px, ${y}px)`;
    }

    // movement loop
    setInterval(()=>{
      if(!currentServer) return;
      currentServer.aInstances.slice().forEach(inst=>{
        if(!inst.claimedBy){ inst.position += 3 + Math.random()*2; if(inst.position>=100){ // despawn
            currentServer.aInstances = currentServer.aInstances.filter(i=>i.id!==inst.id); const el=document.getElementById(inst.id); if(el) el.remove(); log(currentServer,`${inst.name} despawned (not claimed)`); return; }
        } else { // being carried - no automatic accrual until placed
          inst.position = Math.min(100,inst.position + 6);
        }
        renderAvaPiece(inst);
      });
    },120);

    // per-second accrual for placed avas
    setInterval(()=>{
      if(!currentServer) return;
      currentServer.bases.forEach(base=>{
        base.slots.forEach(s=>{ if(s){ s.accrued = (s.accrued||0) + s.valuePerSec; }});
      });
      updateMoney(); renderServerView();
    },1000);

    function claimAva(inst){ if(inst.claimedBy){ alert('Already claimed'); return; } inst.claimedBy = player.name; log(currentServer,`${player.name} claimed ${inst.name}, carrying to base.`); // simulate travel
      setTimeout(()=>{ // place into player's base if space
        const base=currentServer.bases[player.baseIndex]; const idx=base.slots.findIndex(s=>!s); if(idx===-1){ // drop
          currentServer.aInstances=currentServer.aInstances.filter(i=>i.id!==inst.id); const el=document.getElementById(inst.id); if(el) el.remove(); log(currentServer,`${player.name} couldn't place ${inst.name} — base full. Dropped.`); renderServerView(); return; }
        base.slots[idx] = {name:inst.name,rarity:inst.rarity,rarityKey:inst.rarityKey,valuePerSec:inst.valuePerSec,accrued:0}; currentServer.aInstances=currentServer.aInstances.filter(i=>i.id!==inst.id); const el=document.getElementById(inst.id); if(el) el.remove(); log(currentServer,`${player.name} placed ${inst.name} into their base slot ${idx+1}.`); renderServerView(); }, 900 + Math.random()*700);
    }

    // stealing from slot: players can steal anytime (no restriction)
    function stealFromSlot(base,slotIndex){ if(!currentServer) return; if(!base.slots[slotIndex]) return alert('No Ava to steal'); // if target locked only prevents certain interactions? user said can steal anytime — so ignore lock for stealing
      const s = base.slots[slotIndex]; base.slots[slotIndex]=null; // create carried instance
      const inst = {id:'stolen-'+Date.now(),name:s.name,rarity:s.rarity,rarityKey:s.rarityKey,valuePerSec:s.valuePerSec,position:0,claimedBy:player.name,accrued:0,side:'left'}; currentServer.aInstances.push(inst); renderAvaPiece(inst); log(currentServer,`${player.name} stole ${s.name} from ${base.owner}`);
      setTimeout(()=>{ const myBase=currentServer.bases[player.baseIndex]; const empty=myBase.slots.findIndex(x=>!x); if(empty===-1){ currentServer.aInstances=currentServer.aInstances.filter(i=>i.id!==inst.id); log(currentServer,`${player.name} had no room, dropped ${inst.name}`); renderServerView(); return; } myBase.slots[empty]={name:inst.name,rarity:inst.rarity,rarityKey:inst.rarityKey,valuePerSec:inst.valuePerSec,accrued:0}; currentServer.aInstances=currentServer.aInstances.filter(i=>i.id!==inst.id); log(currentServer,`${player.name} placed stolen ${inst.name} into their base.`); renderServerView(); },1000+Math.random()*1000);
    }

    function updateMoney(){ moneyEl.textContent = Math.floor(player.money).toLocaleString(); }

    function formatNum(n){ return n.toLocaleString(); }

    // Shop: buy Avas with cost ranges
    function renderShop(){ shopArea.innerHTML=''; rarities.forEach(r=>{ const costMin=r.buyRange[0], costMax=r.buyRange[1]; const priceText = costMin===costMax?`$${formatNum(costMin)}`:`$${formatNum(costMin)} - $${formatNum(costMax)}`; const div=document.createElement('div'); div.className='item'; div.innerHTML=`<div><strong>${r.label}</strong><div style='font-size:12px;opacity:0.9'>Value/s: ${r.valuePerSecRange[0]} - ${r.valuePerSecRange[1]} /s</div></div><div><div style='font-size:12px;opacity:0.95'>${priceText}</div><button class='btn'>Buy</button></div>`; div.querySelector('button').addEventListener('click',()=>buyAva(r)); shopArea.appendChild(div); }); }

    function buyAva(r){ const price = randInt(r.buyRange[0], r.buyRange[1]); if(player.money < price){ alert('Not enough money'); return; } player.money -= price; const name = generateAvaName(Math.floor(Math.random()*1000)); const valuePerSec = randInt(r.valuePerSecRange[0], r.valuePerSecRange[1]); const base = currentServer.bases[player.baseIndex]; const slotIdx = base.slots.findIndex(s=>!s); if(slotIdx===-1){ alert('Your base is full'); player.money += price; return; } base.slots[slotIdx] = {name,rarity:r.label,rarityKey:r.id,valuePerSec,accrued:0}; log(currentServer,`${player.name} bought ${name} (${r.label}) for $${formatNum(price)} and placed into slot ${slotIdx+1}`); renderServerView(); updateMoney(); }

    // buy baseball bat
    document.getElementById('buyBat').addEventListener('click',()=>{
      const cost = 5000000; if(player.hasBat){ alert('You already have a bat'); return; } if(player.money < cost){ alert('Not enough money'); return; } player.money -= cost; player.hasBat = true; updateMoney(); log(currentServer,`${player.name} bought a Baseball Bat.`); alert('You bought the Baseball Bat — in this prototype hitting a player will make them drop a held Ava when they are caught in the act (simulated by using the Steal button).'); });

    // create servers
    document.getElementById('createServer').addEventListener('click',()=>{ const s=createServer(`Steal-a-Ava Server ${servers.length+1}`); renderServers(); log(s,'Server created'); });

    // lock base button
    document.getElementById('lockBase').addEventListener('click',()=>{ if(!currentServer) return alert('Join a server first'); const base=currentServer.bases[player.baseIndex]; if(base.locked) return alert('Already locked'); base.locked=true; base.lockExpires=Date.now()+60000; log(currentServer,`${player.name} locked their base for 60s`); renderServerView(); });

    // init
    renderServers(); renderShop(); updateMoney();

    // auto spawn every 3s
    setInterval(()=>{ if(currentServer) spawnAutoAva(); },3000);

    // expose
    window.__SERVERS__ = servers;
  </script>
</body>
</html>
